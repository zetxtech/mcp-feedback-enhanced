{#
åœ–ç‰‡ä¸Šå‚³çµ„ä»¶
============

åƒæ•¸:
- id_prefix: ID å‰ç¶´ï¼Œç”¨æ–¼å€åˆ†ä¸åŒå¯¦ä¾‹ (ä¾‹å¦‚: "feedback", "combined")
- label_text: æ¨™ç±¤æ–‡å­— (é è¨­: "åœ–ç‰‡é™„ä»¶ï¼ˆå¯é¸ï¼‰")
- upload_text: ä¸Šå‚³æç¤ºæ–‡å­—
- min_height: æœ€å°é«˜åº¦ (é è¨­: "120px")

ä½¿ç”¨æ–¹å¼:
{% include 'components/image-upload.html' with context %}
æˆ–
{% include 'components/image-upload.html' with id_prefix="feedback" %}
#}

{% set id_prefix = id_prefix or "default" %}
{% set label_text = label_text or "åœ–ç‰‡é™„ä»¶ï¼ˆå¯é¸ï¼‰" %}
{% set min_height = min_height or "120px" %}
{% set upload_text = upload_text or "ğŸ“ é»æ“Šé¸æ“‡åœ–ç‰‡æˆ–æ‹–æ”¾åœ–ç‰‡åˆ°æ­¤è™•<br><small>æ”¯æ´ PNGã€JPGã€JPEGã€GIFã€BMPã€WebP ç­‰æ ¼å¼</small>" %}

<!-- åœ–ç‰‡è¨­å®šå€åŸŸ -->
<div class="input-group" style="margin-bottom: 12px;">
    <details class="image-settings-details">
        <summary class="image-settings-summary" data-i18n="images.settings.title">âš™ï¸ åœ–ç‰‡è¨­å®š</summary>
        <div class="image-settings-content">
            <div class="image-setting-row">
                <label class="image-setting-label" data-i18n="images.settings.sizeLimit">åœ–ç‰‡å¤§å°é™åˆ¶ï¼š</label>
                <select id="{{ id_prefix }}ImageSizeLimit" class="image-setting-select">
                    <option value="0" data-i18n="images.settings.sizeLimitOptions.unlimited">ç„¡é™åˆ¶</option>
                    <option value="1048576" data-i18n="images.settings.sizeLimitOptions.1mb">1MB</option>
                    <option value="3145728" data-i18n="images.settings.sizeLimitOptions.3mb">3MB</option>
                    <option value="5242880" data-i18n="images.settings.sizeLimitOptions.5mb">5MB</option>
                </select>
            </div>
            <div class="image-setting-row">
                <label class="image-setting-checkbox-container">
                    <input type="checkbox" id="{{ id_prefix }}EnableBase64Detail" class="image-setting-checkbox">
                    <span class="image-setting-checkmark"></span>
                    <span class="image-setting-label" data-i18n="images.settings.base64Detail">Base64 ç›¸å®¹æ¨¡å¼</span>
                </label>
                <small class="image-setting-help" data-i18n="images.settings.base64Warning">âš ï¸ æœƒå¢åŠ å‚³è¼¸é‡</small>
            </div>
            <div class="image-setting-help-text" data-i18n="images.settings.base64DetailHelp">
                å•Ÿç”¨å¾Œæœƒåœ¨æ–‡å­—ä¸­åŒ…å«å®Œæ•´çš„ Base64 åœ–ç‰‡è³‡æ–™ï¼Œæå‡éƒ¨åˆ† AI æ¨¡å‹çš„ç›¸å®¹æ€§
            </div>
        </div>
    </details>
</div>

<div class="input-group">
    <label class="input-label" data-i18n="feedback.imageLabel">{{ label_text }}</label>
    
    <!-- ç›¸å®¹æ€§æç¤ºå€åŸŸ -->
    <div id="{{ id_prefix }}CompatibilityHint" class="compatibility-hint" style="display: none;">
        <span data-i18n="images.settings.compatibilityHint">ğŸ’¡ åœ–ç‰‡ç„¡æ³•æ­£ç¢ºè­˜åˆ¥ï¼Ÿ</span>
        <button type="button" id="{{ id_prefix }}EnableBase64Hint" class="compatibility-hint-btn" data-i18n="images.settings.enableBase64Hint">
            å˜—è©¦å•Ÿç”¨ Base64 ç›¸å®¹æ¨¡å¼
        </button>
    </div>
    
    <!-- åœ–ç‰‡ä¸Šå‚³å€åŸŸ -->
    <div id="{{ id_prefix }}ImageUploadArea" class="image-upload-area" style="min-height: {{ min_height }};">
        <div id="{{ id_prefix }}ImageUploadText" data-i18n="feedback.imageUploadText">
            {{ upload_text|safe }}
        </div>
        <div id="{{ id_prefix }}ImagePreviewContainer" class="image-preview-container"></div>
        <input type="file" id="{{ id_prefix }}ImageInput" multiple accept="image/*" style="display: none;">
    </div>
</div>
